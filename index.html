<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Ù…Ù† Ø³ÙŠØ±Ø¨Ø­ Ø§Ù„Ù…Ù„ÙŠÙˆÙ† - Ù…. Ù…Ø­Ù…Ø¯ Ø¹Ù…Ø±Ùˆ ÙˆØ¹Ù…Ø± Ø¹Ù…Ø±Ùˆ</title>
    <link href="https://fonts.googleapis.com/css2?family=Tajawal:wght@400;700;900&family=Amiri:wght@400;700&display=swap" rel="stylesheet">
    <style>
        :root {
            --bg-dark: #010114;
            --gold: #d4af37;
            --gold-bright: #f9d71c;
            --blue-box: #0a0a4d;
            --correct: #117511;
            --wrong: #941111;
            --text: #ffffff;
        }

        * { margin: 0; padding: 0; box-sizing: border-box; font-family: 'Tajawal', sans-serif; }

        body {
            background-color: var(--bg-dark);
            background-image: 
                radial-gradient(circle at 50% 50%, #0a0a5e 0%, #010114 100%),
                url('https://www.transparenttextures.com/patterns/stardust.png');
            color: var(--text);
            height: 100vh;
            overflow: hidden;
            display: flex;
            flex-direction: column;
        }

        /* Header Styling */
        .header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 15px 30px;
            background: rgba(0,0,0,0.85);
            border-bottom: 3px solid var(--gold);
            box-shadow: 0 5px 15px rgba(0,0,0,0.5);
        }

        .logo-area { text-align: right; }
        .logo-area h1 { color: var(--gold); font-size: 1.5rem; font-weight: 900; text-shadow: 2px 2px 4px #000; }
        .logo-area small { color: #ccc; font-size: 0.8rem; letter-spacing: 1px; }

        .dev-info { font-size: 0.9rem; color: var(--gold); border-right: 4px solid var(--gold); padding-right: 15px; }

        .lifelines { display: flex; gap: 12px; }
        .lifeline {
            width: 60px; height: 45px;
            border: 2px solid var(--gold);
            border-radius: 50%;
            background: radial-gradient(circle, var(--blue-box), #000);
            color: var(--gold);
            cursor: pointer;
            font-weight: bold;
            font-size: 1.1rem;
            transition: 0.3s cubic-bezier(0.175, 0.885, 0.32, 1.275);
            box-shadow: 0 4px 0 #555;
        }
        .lifeline:hover:not(:disabled) { transform: scale(1.1); color: white; border-color: white; }
        .lifeline:active { transform: translateY(4px); box-shadow: 0 0 0; }
        .lifeline:disabled { opacity: 0.3; filter: grayscale(1); cursor: not-allowed; }

        /* Game Layout */
        .game-container {
            flex: 1;
            display: grid;
            grid-template-columns: 1fr 300px;
            padding: 30px;
            gap: 30px;
        }

        .main-stage {
            display: flex;
            flex-direction: column;
            justify-content: center;
            align-items: center;
            position: relative;
        }

        .question-box {
            width: 100%;
            max-width: 850px;
            background: linear-gradient(to right, #000 0%, var(--blue-box) 50%, #000 100%);
            border: 2px solid var(--gold);
            padding: 35px;
            text-align: center;
            font-size: 1.6rem;
            margin-bottom: 40px;
            position: relative;
            clip-path: polygon(3% 0%, 97% 0%, 100% 50%, 97% 100%, 3% 100%, 0% 50%);
            box-shadow: 0 0 30px rgba(212, 175, 55, 0.2);
        }

        .answers-grid {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 20px;
            width: 100%;
            max-width: 850px;
        }

        .answer {
            background: linear-gradient(to right, #000 0%, var(--blue-box) 50%, #000 100%);
            border: 1px solid var(--gold);
            padding: 18px 40px;
            cursor: pointer;
            font-size: 1.2rem;
            transition: 0.2s;
            clip-path: polygon(8% 0%, 92% 0%, 100% 50%, 92% 100%, 8% 100%, 0% 50%);
            display: flex;
            align-items: center;
            position: relative;
        }
        .answer span { color: var(--gold); font-weight: bold; margin-left: 15px; font-size: 1.3rem; }

        .answer:hover:not(.locked) { background: #1a1a8c; border-color: white; transform: scale(1.02); }
        .answer.selected { background: #d48e00 !important; color: black; }
        .answer.selected span { color: black; }
        .answer.correct { background: var(--correct) !important; animation: blink 0.4s 4; }
        .answer.wrong { background: var(--wrong) !important; animation: shake 0.3s; }
        .answer.hidden { visibility: hidden; }

        @keyframes blink { 0%, 100% { opacity: 1; } 50% { opacity: 0.4; } }
        @keyframes shake { 0%, 100% { transform: translateX(0); } 25% { transform: translateX(-10px); } 75% { transform: translateX(10px); } }

        /* Sidebar Prize Ladder */
        .sidebar {
            background: rgba(0,0,0,0.6);
            border-left: 2px solid var(--gold);
            padding: 15px;
            display: flex;
            flex-direction: column-reverse;
            justify-content: space-around;
        }

        .level {
            display: flex;
            justify-content: space-between;
            padding: 5px 15px;
            color: var(--gold);
            font-weight: bold;
            font-size: 1rem;
            border-radius: 5px;
        }
        .level.active { background: var(--gold); color: black; box-shadow: 0 0 15px var(--gold); }
        .level.safe { color: #fff; }

        /* Overlays */
        #modal-overlay {
            position: fixed; inset: 0; background: rgba(0,0,0,0.9);
            display: none; justify-content: center; align-items: center; z-index: 5000;
        }

        .call-card {
            background: #111; border: 3px solid var(--gold); border-radius: 30px;
            width: 320px; padding: 40px; text-align: center; color: white;
            box-shadow: 0 0 50px var(--gold);
        }

        #check-overlay {
            position: fixed; inset: 0; background: rgba(0,0,0,0.95);
            display: none; justify-content: center; align-items: center; z-index: 6000;
        }

        .check {
            background: #fff; width: 850px; padding: 40px; border: 12px double #333;
            color: #222; font-family: 'Amiri', serif; position: relative;
            background-image: url('https://www.transparenttextures.com/patterns/paper-fibers.png');
        }

        .btn-again {
            margin-top: 30px; padding: 15px 40px; background: var(--gold);
            border: none; font-weight: bold; cursor: pointer; font-size: 1.2rem;
            box-shadow: 0 5px 0 #997d28; transition: 0.2s;
        }
        .btn-again:active { transform: translateY(3px); box-shadow: 0 2px 0 #997d28; }

        @media (max-width: 1000px) {
            .game-container { grid-template-columns: 1fr; }
            .sidebar { display: none; }
            .question-box { font-size: 1.2rem; }
            .answer { font-size: 1rem; }
        }
    </style>
</head>
<body>

    <div class="header">
        <div class="logo-area">
            <h1>Ù…Ù† Ø³ÙŠØ±Ø¨Ø­ Ø§Ù„Ù…Ù„ÙŠÙˆÙ†</h1>
            <small>EDITION 2024 - PRO</small>
        </div>
        
        <div class="dev-info">
            Ø¨Ø¥Ø´Ø±Ø§Ù: <strong>Ø¹Ù…Ø± Ø¹Ù…Ø±Ùˆ</strong><br>
            ØªØ·ÙˆÙŠØ±: <strong>Ù…. Ù…Ø­Ù…Ø¯ Ø¹Ù…Ø±Ùˆ</strong>
        </div>

        <div class="lifelines">
            <button class="lifeline" id="l50" title="Ø­Ø°Ù Ø¥Ø¬Ø§Ø¨ØªÙŠÙ†" onclick="help50()">50</button>
            <button class="lifeline" id="lCall" title="Ø§ØªØµØ§Ù„ Ø¨ØµØ¯ÙŠÙ‚" onclick="helpCall()">ğŸ“</button>
            <button class="lifeline" id="lCrowd" title="Ø±Ø£ÙŠ Ø§Ù„Ø¬Ù…Ù‡ÙˆØ±" onclick="helpCrowd()">ğŸ‘¥</button>
        </div>
        
        <div style="text-align: left;">
            <div id="prize-text" style="color: var(--gold); font-size: 1.6rem; font-weight: 900;">0 Ø¬.Ù…</div>
            <div style="font-size: 0.7rem; color: #888;">Ø§Ù„Ø±ØµÙŠØ¯ Ø§Ù„Ø­Ø§Ù„ÙŠ</div>
        </div>
    </div>

    <div class="game-container">
        <div class="main-stage">
            <div id="status-msg" style="color: var(--gold); margin-bottom: 20px; font-weight: bold;">Ù…Ø³ØªØ¹Ø¯ Ù„Ù„Ù…Ù„ÙŠÙˆÙ†ØŸ</div>
            <div class="question-box" id="q-text">Ø¬Ø§Ø±ÙŠ ØªØ­Ø¶ÙŠØ± Ø§Ù„Ø§Ø³ØªÙˆØ¯ÙŠÙˆ...</div>
            <div class="answers-grid" id="ans-grid">
                <div class="answer" onclick="handleSelect(0)" id="a0"><span>Ø£:</span> <p></p></div>
                <div class="answer" onclick="handleSelect(1)" id="a1"><span>Ø¨:</span> <p></p></div>
                <div class="answer" onclick="handleSelect(2)" id="a2"><span>Ø¬:</span> <p></p></div>
                <div class="answer" onclick="handleSelect(3)" id="a3"><span>Ø¯:</span> <p></p></div>
            </div>
        </div>
        <div class="sidebar" id="ladder"></div>
    </div>

    <!-- Ø§Ù„Ø§ØªØµØ§Ù„ Ø¨ØµØ¯ÙŠÙ‚ (Ø¹Ù…Ø± Ø¹Ù…Ø±Ùˆ) -->
    <div id="modal-overlay">
        <div class="call-card">
            <div style="font-size: 5rem; margin-bottom: 10px;">ğŸ“±</div>
            <h2 id="caller-name">Ø¹Ù…Ø± Ø¹Ù…Ø±Ùˆ</h2>
            <p id="call-status" style="margin: 15px 0; color: #aaa;">Ø¬Ø§Ø±ÙŠ Ø§Ù„Ø§ØªØµØ§Ù„...</p>
            <div id="call-visual" style="height: 5px; background: var(--gold); width: 0%; transition: width 4s linear;"></div>
        </div>
    </div>

    <!-- Ø´ÙŠÙƒ Ø§Ù„Ù…Ù„ÙŠÙˆÙ† -->
    <div id="check-overlay">
        <div class="check">
            <div style="display: flex; justify-content: space-between; border-bottom: 3px solid #222; padding-bottom: 10px;">
                <h1 style="font-size: 2.5rem;">Ø§Ù„Ø¨Ù†Ùƒ Ø§Ù„Ù…Ø±ÙƒØ²ÙŠ Ù„Ø¢Ù„ Ø¹Ù…Ø±Ùˆ</h1>
                <div style="text-align: left;">
                    <p id="check-num">Ø±Ù‚Ù…: 0001-2024</p>
                    <p id="check-date"></p>
                </div>
            </div>
            <div style="margin: 40px 0; font-size: 1.8rem; line-height: 2;">
                ÙŠÙØµØ±Ù Ø¨Ù…ÙˆØ¬Ø¨ Ù‡Ø°Ø§ Ø§Ù„Ø´ÙŠÙƒ Ù„Ù„Ø³ÙŠØ¯/ <span style="border-bottom: 2px dotted #333; padding: 0 20px;">Ø§Ù„Ø¹Ø¨Ù‚Ø±ÙŠ Ø§Ù„ÙØ§Ø¦Ø² Ø¨Ø§Ù„Ù…Ù„ÙŠÙˆÙ†</span><br>
                Ù…Ø¨Ù„Øº ÙˆÙ‚Ø¯Ø±Ù‡: <span style="font-weight: bold; text-decoration: underline;">Ù…Ù„ÙŠÙˆÙ† Ø¬Ù†ÙŠÙ‡ Ù…ØµØ±ÙŠ Ù„Ø§ ØºÙŠØ±</span>
                <div style="margin-top: 30px; border: 4px solid #222; display: inline-block; padding: 10px 40px; font-size: 2.2rem; background: #eee;">
                    # 1,000,000 EGP #
                </div>
            </div>
            <div style="display: flex; justify-content: space-between; margin-top: 50px;">
                <div style="text-align: center;">
                    <p style="font-size: 0.8rem;">Ø§Ù„Ù…Ø·ÙˆØ± Ø§Ù„Ø¹Ø§Ù…</p>
                    <p style="font-size: 1.4rem; font-weight: bold;">Ù…. Ù…Ø­Ù…Ø¯ Ø¹Ù…Ø±Ùˆ</p>
                </div>
                <div style="text-align: center;">
                    <p style="font-size: 0.8rem;">Ø±Ø¦ÙŠØ³ Ø§Ù„Ù„Ø¬Ù†Ø©</p>
                    <p style="font-size: 1.4rem; font-weight: bold; color: #a00;">Ø¹Ù…Ø± Ø¹Ù…Ø±Ùˆ</p>
                </div>
                <div style="text-align: center;">
                    <p style="font-size: 0.8rem;">Ù…Ù‚Ø¯Ù… Ø§Ù„Ø¨Ø±Ù†Ø§Ù…Ø¬</p>
                    <p style="font-size: 1.4rem; font-style: italic;">Ø¬ÙˆØ±Ø¬ Ù‚Ø±Ø¯Ø§Ø­ÙŠ</p>
                </div>
            </div>
            <button class="btn-again" onclick="resetGame()">ØªØ­Ø¯ÙŠ Ø¬Ø¯ÙŠØ¯ Ø¨Ø£Ø³Ø¦Ù„Ø© Ø¬Ø¯ÙŠØ¯Ø©</button>
        </div>
    </div>

    <script>
        const audioCtx = new (window.AudioContext || window.webkitAudioContext)();
        
        // Ù…Ø­Ø±Ùƒ Ù†Ø·Ù‚ Ø§Ù„Ø¥Ø¬Ø§Ø¨Ø© (Ø¹Ù…Ø± Ø¹Ù…Ø±Ùˆ)
        function speak(text) {
            window.speechSynthesis.cancel();
            const msg = new SpeechSynthesisUtterance(text);
            msg.lang = 'ar-SA';
            msg.rate = 0.9;
            msg.pitch = 1.1;
            window.speechSynthesis.speak(msg);
        }

        function playSound(freq, type, dur, vol = 0.05) {
            const osc = audioCtx.createOscillator();
            const gain = audioCtx.createGain();
            osc.type = type;
            osc.frequency.setValueAtTime(freq, audioCtx.currentTime);
            gain.gain.setValueAtTime(vol, audioCtx.currentTime);
            gain.gain.exponentialRampToValueAtTime(0.0001, audioCtx.currentTime + dur);
            osc.connect(gain); gain.connect(audioCtx.destination);
            osc.start(); osc.stop(audioCtx.currentTime + dur);
        }

        const prizes = ["100", "200", "300", "500", "1,000", "2,000", "4,000", "8,000", "16,000", "32,000", "64,000", "125,000", "250,000", "500,000", "1,000,000"];
        
        // Ø¨Ù†Ùƒ Ø£Ø³Ø¦Ù„Ø© Ø§Ø­ØªØ±Ø§ÙÙŠ
        const questionBank = [
            { q: "Ù…Ø§ Ù‡ÙŠ Ø¹Ø§ØµÙ…Ø© Ø¥Ø³Ø¨Ø§Ù†ÙŠØ§ØŸ", a: ["Ø¨Ø±Ø´Ù„ÙˆÙ†Ø©", "Ù…Ø¯Ø±ÙŠØ¯", "Ø¥Ø´Ø¨ÙŠÙ„ÙŠØ©", "ÙØ§Ù„Ù†Ø³ÙŠØ§"], c: 1 },
            { q: "Ù…Ø§ Ù‡Ùˆ Ø§Ù„Ù…Ø¹Ø¯Ù† Ø§Ù„Ø°ÙŠ ÙŠÙˆØ¬Ø¯ ÙÙŠ Ø­Ø§Ù„Ø© Ø³Ø§Ø¦Ù„Ø© ÙÙŠ Ø¯Ø±Ø¬Ø© Ø§Ù„Ø­Ø±Ø§Ø±Ø© Ø§Ù„Ø¹Ø§Ø¯ÙŠØ©ØŸ", a: ["Ø§Ù„Ù†Ø­Ø§Ø³", "Ø§Ù„Ø­Ø¯ÙŠØ¯", "Ø§Ù„Ø²Ø¦Ø¨Ù‚", "Ø§Ù„Ù‚ØµØ¯ÙŠØ±"], c: 2 },
            { q: "Ù…Ù† Ù‡Ùˆ Ù…Ø¤Ù„Ù ÙƒØªØ§Ø¨ 'Ù…Ù‚Ø¯Ù…Ø© Ø§Ø¨Ù† Ø®Ù„Ø¯ÙˆÙ†'ØŸ", a: ["Ø§Ø¨Ù† Ø®Ù„Ø¯ÙˆÙ†", "Ø§Ø¨Ù† Ø±Ø´Ø¯", "Ø§Ù„ØºØ²Ø§Ù„ÙŠ", "Ø§Ø¨Ù† Ø¨Ø·ÙˆØ·Ø©"], c: 0 },
            { q: "Ù…Ø§ Ù‡Ùˆ Ø£Ø·ÙˆÙ„ Ù†Ù‡Ø± ÙÙŠ Ø£ÙØ±ÙŠÙ‚ÙŠØ§ ÙˆØ§Ù„Ø¹Ø§Ù„Ù…ØŸ", a: ["Ù†Ù‡Ø± Ø§Ù„Ø£Ù…Ø§Ø²ÙˆÙ†", "Ù†Ù‡Ø± Ø§Ù„Ù†ÙŠÙ„", "Ù†Ù‡Ø± Ø§Ù„Ù…Ø³ÙŠØ³ÙŠØ¨ÙŠ", "Ù†Ù‡Ø± Ø§Ù„ÙŠØ§Ù†ØºØªØ³ÙŠ"], c: 1 },
            { q: "ÙƒÙ… Ø¹Ø¯Ø¯ Ø£Ø³Ù†Ø§Ù† Ø§Ù„Ø¥Ù†Ø³Ø§Ù† Ø§Ù„Ø¨Ø§Ù„ØºØŸ", a: ["28", "30", "32", "34"], c: 2 },
            { q: "ÙÙŠ Ø£ÙŠ Ù‚Ø§Ø±Ø© ØªÙ‚Ø¹ Ø¯ÙˆÙ„Ø© Ø§Ù„Ø¨Ø±Ø§Ø²ÙŠÙ„ØŸ", a: ["Ø£ÙØ±ÙŠÙ‚ÙŠØ§", "Ø¢Ø³ÙŠØ§", "Ø£Ù…Ø±ÙŠÙƒØ§ Ø§Ù„Ø¬Ù†ÙˆØ¨ÙŠØ©", "Ø£ÙˆØ±ÙˆØ¨Ø§"], c: 2 },
            { q: "Ù…Ø§ Ù‡Ùˆ Ø§Ù„ØºØ§Ø² Ø§Ù„Ø±Ø¦ÙŠØ³ÙŠ ÙÙŠ ØºÙ„Ø§Ù Ø§Ù„Ø£Ø±Ø¶ØŸ", a: ["Ø§Ù„Ø£ÙƒØ³Ø¬ÙŠÙ†", "Ø§Ù„Ù†ÙŠØªØ±ÙˆØ¬ÙŠÙ†", "Ø§Ù„Ù‡ÙŠØ¯Ø±ÙˆØ¬ÙŠÙ†", "Ø§Ù„Ø£Ø±Ø¬ÙˆÙ†"], c: 1 },
            { q: "Ù…Ù† Ù‡Ùˆ Ø§Ù„Ø±Ø³Ø§Ù… ØµØ§Ø­Ø¨ Ù„ÙˆØ­Ø© 'Ø§Ù„Ù…ÙˆÙ†Ø§Ù„ÙŠØ²Ø§'ØŸ", a: ["Ø¨ÙŠÙƒØ§Ø³Ùˆ", "ÙØ§Ù† Ø¬ÙˆØ®", "Ù„ÙŠÙˆÙ†Ø§Ø±Ø¯Ùˆ Ø¯Ø§ ÙÙŠÙ†Ø´ÙŠ", "Ø¯Ø§Ù„ÙŠ"], c: 2 },
            { q: "Ù…Ø§ Ù‡Ùˆ Ø§Ù„Ø±Ù…Ø² Ø§Ù„ÙƒÙŠÙ…ÙŠØ§Ø¦ÙŠ Ù„Ù„Ø°Ù‡Ø¨ØŸ", a: ["Au", "Ag", "Fe", "Cu"], c: 0 },
            { q: "Ù…Ø§ Ù‡Ùˆ Ø§Ù„ÙƒÙˆÙƒØ¨ Ø§Ù„Ø£Ù‚Ø±Ø¨ Ø¥Ù„Ù‰ Ø§Ù„Ø´Ù…Ø³ØŸ", a: ["Ø§Ù„Ø²Ù‡Ø±Ø©", "Ø§Ù„Ù…Ø±ÙŠØ®", "Ø¹Ø·Ø§Ø±Ø¯", "Ø§Ù„Ø£Ø±Ø¶"], c: 2 },
            { q: "Ù…Ù† ÙØ§Ø² Ø¨ÙƒØ£Ø³ Ø§Ù„Ø¹Ø§Ù„Ù… Ù„ÙƒØ±Ø© Ø§Ù„Ù‚Ø¯Ù… 2022ØŸ", a: ["ÙØ±Ù†Ø³Ø§", "Ø§Ù„Ø£Ø±Ø¬Ù†ØªÙŠÙ†", "Ø§Ù„Ø¨Ø±Ø§Ø²ÙŠÙ„", "Ø£Ù„Ù…Ø§Ù†ÙŠØ§"], c: 1 },
            { q: "Ù…Ø§ Ù‡ÙŠ Ø£ÙƒØ¨Ø± ØµØ­Ø±Ø§Ø¡ ÙÙŠ Ø§Ù„Ø¹Ø§Ù„Ù…ØŸ", a: ["Ø§Ù„ØµØ­Ø±Ø§Ø¡ Ø§Ù„ÙƒØ¨Ø±Ù‰", "ØµØ­Ø±Ø§Ø¡ Ø¬ÙˆØ¨ÙŠ", "Ø§Ù„Ù‚Ø§Ø±Ø© Ø§Ù„Ù‚Ø·Ø¨ÙŠØ© Ø§Ù„Ø¬Ù†ÙˆØ¨ÙŠØ©", "ØµØ­Ø±Ø§Ø¡ Ø§Ù„Ø±Ø¨Ø¹ Ø§Ù„Ø®Ø§Ù„ÙŠ"], c: 2 },
            { q: "Ù…Ø§ Ù‡Ùˆ Ø§Ù„Ø­ÙŠÙˆØ§Ù† Ø§Ù„Ø°ÙŠ ÙŠÙÙ„Ù‚Ø¨ Ø¨Ù€ 'Ø³ÙÙŠÙ†Ø© Ø§Ù„ØµØ­Ø±Ø§Ø¡'ØŸ", a: ["Ø§Ù„Ø­ØµØ§Ù†", "Ø§Ù„Ø¬Ù…Ù„", "Ø§Ù„ÙÙŠÙ„", "Ø§Ù„Ø²Ø±Ø§ÙØ©"], c: 1 },
            { q: "ÙƒÙ… Ø¹Ø¯Ø¯ Ø´Ù‡ÙˆØ± Ø§Ù„Ø³Ù†Ø© Ø§Ù„Ù‡Ø¬Ø±ÙŠØ©ØŸ", a: ["10", "11", "12", "13"], c: 2 },
            { q: "Ù…Ø§ Ù‡ÙŠ Ø¹Ø§ØµÙ…Ø© Ø§Ù„ÙŠØ§Ø¨Ø§Ù†ØŸ", a: ["Ø·ÙˆÙƒÙŠÙˆ", "Ø¨ÙƒÙŠÙ†", "Ø³ÙŠÙˆÙ„", "Ø¨Ø§Ù†ÙƒÙˆÙƒ"], c: 0 }
        ];

        let currentIdx = 0;
        let isLocked = false;
        let questions = [];

        function resetGame() {
            currentIdx = 0;
            isLocked = false;
            document.getElementById('check-overlay').style.display = 'none';
            document.getElementById('prize-text').innerText = "0 Ø¬.Ù…";
            document.querySelectorAll('.lifeline').forEach(b => b.disabled = false);
            // Ø®Ù„Ø· Ø§Ù„Ø£Ø³Ø¦Ù„Ø©
            questions = [...questionBank].sort(() => Math.random() - 0.5);
            renderLadder();
            loadQuestion();
        }

        function renderLadder() {
            const l = document.getElementById('ladder');
            l.innerHTML = prizes.map((val, i) => `
                <div class="level ${i === currentIdx ? 'active' : ''} ${[4, 9, 14].includes(i) ? 'safe' : ''}">
                    <span>${i + 1}</span> <span>${val} Ø¬.Ù…</span>
                </div>
            `).join('');
        }

        function loadQuestion() {
            isLocked = false;
            const q = questions[currentIdx];
            document.getElementById('status-msg').innerText = "Ø§Ù„Ø³Ø¤Ø§Ù„ Ø±Ù‚Ù… " + (currentIdx + 1);
            document.getElementById('q-text').innerText = q.q;
            for(let i=0; i<4; i++) {
                const btn = document.getElementById('a' + i);
                btn.querySelector('p').innerText = q.a[i];
                btn.className = 'answer';
                btn.style.visibility = 'visible';
            }
        }

        function handleSelect(i) {
            if (isLocked) return;
            if (audioCtx.state === 'suspended') audioCtx.resume();
            isLocked = true;
            playSound(400, 'sine', 0.5);
            
            const correct = questions[currentIdx].c;
            const btn = document.getElementById('a' + i);
            btn.classList.add('selected');

            setTimeout(() => {
                if (i === correct) {
                    btn.classList.replace('selected', 'correct');
                    playSound(600, 'sine', 0.3);
                    setTimeout(() => {
                        if (currentIdx === 14) showCheck();
                        else {
                            currentIdx++;
                            document.getElementById('prize-text').innerText = prizes[currentIdx-1] + " Ø¬.Ù…";
                            renderLadder();
                            loadQuestion();
                        }
                    }, 2000);
                } else {
                    btn.classList.replace('selected', 'wrong');
                    document.getElementById('a' + correct).classList.add('correct');
                    playSound(150, 'sawtooth', 0.8);
                    setTimeout(() => {
                        alert("Ù„Ù„Ø£Ø³Ù Ø¥Ø¬Ø§Ø¨Ø© Ø®Ø§Ø·Ø¦Ø©! Ø¹Ù…Ø± Ø¹Ù…Ø±Ùˆ Ø¨ÙŠÙ‚ÙˆÙ„Ùƒ Ø­Ø§ÙˆÙ„ ØªØ§Ù†ÙŠØŒ Ø§Ù„Ø£Ø³Ø¦Ù„Ø© Ø§ØªØºÙŠØ±Øª.");
                        resetGame();
                    }, 2000);
                }
            }, 1500);
        }

        function helpCall() {
            if(isLocked) return;
            const overlay = document.getElementById('modal-overlay');
            const status = document.getElementById('call-status');
            const visual = document.getElementById('call-visual');
            overlay.style.display = 'flex';
            visual.style.width = '100%';
            
            // Ø±Ù†Ø© Ø§Ù„ØªÙ„ÙŠÙÙˆÙ†
            const ringer = setInterval(() => playSound(440, 'sine', 1, 0.02), 2000);

            setTimeout(() => {
                clearInterval(ringer);
                status.innerText = "Ø¹Ù…Ø± Ø¹Ù…Ø±Ùˆ: Ø£Ù„ÙˆØŸ Ø£Ù‡Ù„Ø§Ù‹ ÙŠØ§ Ø¨Ø·Ù„..";
                speak("Ø£Ù‡Ù„Ø§Ù‹ Ø¨ÙƒØŒ Ø£Ù†Ø§ Ø¹Ù…Ø± Ø¹Ù…Ø±Ùˆ. Ù„Ù‚Ø¯ Ù‚Ù…Øª Ø¨ØªØ­Ù„ÙŠÙ„ Ø§Ù„Ø³Ø¤Ø§Ù„ØŒ ÙˆØ£Ù†Ø§ Ù…ØªØ£ÙƒØ¯ Ø¨Ù†Ø³Ø¨Ø© ÙƒØ¨ÙŠØ±Ø© Ø£Ù† Ø§Ù„Ø¥Ø¬Ø§Ø¨Ø© Ø§Ù„ØµØ­ÙŠØ­Ø© Ù‡ÙŠ");
                
                setTimeout(() => {
                    const ansLetter = ['Ø£Ù„Ù', 'Ø¨Ø§Ø¡', 'Ø¬ÙŠÙ…', 'Ø¯Ø§Ù„'][questions[currentIdx].c];
                    speak(ansLetter);
                    status.innerHTML = `<span style="font-size: 2rem; color: var(--gold-bright);">Ø§Ù„Ø¥Ø¬Ø§Ø¨Ø©: ${ansLetter}</span>`;
                    
                    setTimeout(() => {
                        overlay.style.display = 'none';
                        visual.style.width = '0%';
                        document.getElementById('lCall').disabled = true;
                    }, 3000);
                }, 4000);
            }, 4000);
        }

        function help50() {
            if(isLocked) return;
            const correct = questions[currentIdx].c;
            let hidden = 0;
            [0,1,2,3].sort(() => Math.random() - 0.5).forEach(i => {
                if(i !== correct && hidden < 2) {
                    document.getElementById('a' + i).style.visibility = 'hidden';
                    hidden++;
                }
            });
            document.getElementById('l50').disabled = true;
        }

        function helpCrowd() {
            if(isLocked) return;
            const ans = ['Ø£', 'Ø¨', 'Ø¬', 'Ø¯'][questions[currentIdx].c];
            alert("Ø§Ù„Ø¬Ù…Ù‡ÙˆØ± ÙÙŠ Ø§Ù„Ø§Ø³ØªÙˆØ¯ÙŠÙˆØŒ Ø¨Ø¥Ø´Ø±Ø§Ù Ø§Ù„Ø¨Ø§Ø´Ù…Ù‡Ù†Ø¯Ø³ Ù…Ø­Ù…Ø¯ØŒ ÙŠØ±Ù‰ Ø£Ù† Ø§Ù„Ø¥Ø¬Ø§Ø¨Ø© Ù‡ÙŠ (" + ans + ") Ø¨Ù†Ø³Ø¨Ø© 85%");
            document.getElementById('lCrowd').disabled = true;
        }

        function showCheck() {
            document.getElementById('check-date').innerText = "Ø¨ØªØ§Ø±ÙŠØ®: " + new Date().toLocaleDateString('ar-EG');
            document.getElementById('check-overlay').style.display = 'flex';
            playSound(800, 'square', 2, 0.02);
        }

        window.onload = resetGame;
    </script>
</body>
</html>

